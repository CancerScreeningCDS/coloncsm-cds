---
name: OVERDUE_if_next_due_date_gt_6_months_ago_AND_annual_interval
elementId: eve-DetermineIfDueForScreening
externalData:
  - ../events
  - ../../DataElements/data_elements
  - ../../default_patients
data:
  - *patientage45to76range 
  - $import: *OVERDUE_if_next_due_date_>_6_months_ago
results:
  eve-DetermineIfDueForScreening: 
    - activity:
        code:
        - coding:
          - system: "http://snomed.info/sct"
            code: "268548003"
            display: "Screening for malignant neoplasm of large intestine (procedure)"
        timingTiming:
          event: 
          - '2023-04-01'
          repeat:
            frequency: 1
            period: 1
            periodUnit: a  
      activityCode:
      - coding:
        - system: "http://snomed.info/sct"
          code: "268548003"
          display: "Screening for malignant neoplasm of large intestine (procedure)"
      nextDue: '2023-04-01'
      scheduledDue: '2023-04-01'
      scheduledStart: 
      scheduledRepeat: Annual
      lastReportDate: 
      flag:
        code: overdue
        display: "Overdue"
        system: "http://cancerscreeningcds.github.io/crcsm-cds/CodeSystem/recommendation-flag-code-system"
