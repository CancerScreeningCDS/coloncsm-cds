eve-lastTestColonoscopy:
  - &'Most_recent_screening_test_is_colonoscopy'_IS_TRUE
    $import: *&'Colonoscopy'_EXISTS_AND_NOT_EXISTS_latest_of_latest_'FOBT_test'_latest_'Stool_DNA-FIT_test'_latest_'CT_colonography'_latest_'Flexible_sigmoidoscopy'

eve-lastTestStool:
  - &'Most_recent_screening_test_is_gFOBT_or_FIT_test'
    $import: *&'FOBT_test'_EXISTS_AND_NOT_EXISTS_latest_of_latest_'Flexible_sigmoidoscopy'_latest_'Stool_DNA-FIT_test'_latest_'Colonoscopy'_latest_'CT_Colonography'
  - &'Most_recent_screening_test_is_stool_DNA-FIT_test
    $import: *'Stool_DNA-FIT_test'_EXISTS_AND_NOT_EXISTS_latest_of_latest_'Flexible_sigmoidoscopy'_latest_'FOBT_test'_latest_'Colonoscopy'_latest_'CT_Colonography'
 
eve-inconclusiveStoolTest:
  - "&'Most_recent_screening_test_is_gFOBT_or_FIT_test'_AND_latest_'FOBT_test'_result_is_`inconclusive`_OR_`invalid`"
  - &'Most_recent_screening_test_is_gFOBT_or_FIT_test'_AND_latest_'FOBT_test'_result_is_`inconclusive`
    - resourceType: DiagnosticReport
      id: fit-report-inconclusive
      status: final
      code:
        coding:
          - system: http://loinc.org
            code: 29771-3
            display: "Hemoglobin.gastrointestinal.lower [Presence] in Stool by Immunoassay"
      conclusionCode:
        coding:
          - system: http://snomed.info/sct
            code: 419984006
            display: "Inconclusive (qualifier value)"
      effectiveDateTime: 2023-10-01T14:30:00Z
  - "&'Most_recent_screening_test_is_gFOBT_or_FIT_test'_AND_latest_'FOBT_test'_result_is_`invalid`"

eve-abnormalStoolTest:
  - "&'Most_recent_screening_test_is_gFOBT_or_FIT_test'_AND_latest_'FOBT_test'_result_is_`Positive`_OR_'Most_recent_screening_test_is_stool_DNA-FIT_test'_AND_latest_'Stool_DNA-FIT_test'_result_is_`Positive`"
  - &'Most_recent_screening_test_is_gFOBT_or_FIT_test'_AND_latest_'FOBT_test'_result_is_`Positive`
    - resourceType: DiagnosticReport
      id: fit-report-pos
      status: final
      code:
        coding:
          - system: http://loinc.org
            code: 29771-3
            display: "Hemoglobin.gastrointestinal.lower [Presence] in Stool by Immunoassay"
      conclusionCode:
        coding:
          - system: http://snomed.info/sct
            code: 10828004
            display: "Positive (qualifier value)"
      effectiveDateTime: 2023-10-01T14:30:00Z
    - "&'Most_recent_screening_test_is_gFOBT_or_FIT_test'"
    - "&latest_'FOBT_test'_result_is_`Positive`"
    - "&'Most_recent_screening_test_is_stool_DNA-FIT_test'_AND_latest_'Stool_DNA-FIT_test'_result_is_`Positive`"
    - "&'Most_recent_screening_test_is_stool_DNA-FIT_test'"
    - "&latest_'Stool_DNA-FIT_test'_result_is_`Positive`"
eve-lastTestFlexSig:
  - &'Most_recent_screening_test_is_flexible_sigmoidoscopy'
    $import: *'Flexible_sigmoidoscopy'_EXISTS__AND__DATE_of_latest_'Flexible_sigmoidoscopy'is_after_DATE_of_latest_'FIT_test'

eve-abnormalFlexSig:
  - "&'Finding_of_colorectal_cancer'_associated_with_latest_'Flexible_sigmoidoscopy'_EXISTS__OR__'Findings_of_potentially_precancerous_polyps'_associated_with_latest_'Flexible_sigmoidoscopy'_EXISTS"
  - &'Finding_of_colorectal_cancer'_associated_with_latest_'Flexible_sigmoidoscopy'_EXISTS
    - resourceType: DiagnosticReport
      id: fleg-sig-report
      status: final
      code:
        coding:
          - system: http://snomed.info/sct
            code: 44441009
            display: "Flexible fiberoptic sigmoidoscopy (procedure)"
      effectiveDateTime: 2023-10-01T14:30:00Z
    - *DIAGNOSTIC_REPORT_result_of_`Colorectal_cancer_finding`_sigmoidoscopy
  - "&'Findings_of_potentially_precancerous_polyps'_associated_with_latest_'Flexible_sigmoidoscopy'_EXISTS"

eve-lastTestCTC:
  - "&'Most_recent_screening_test_is_CT_colonography'"
eve-inconclusiveCTColonography:
  - "&'Finding_of_inadequate_CT_Colonography'_associated_with_latest_'CT_colonography'_EXISTS"
eve-abnormalCTColonography:
  - "&'C-RADS_category_C4_finding'_associated_with_latest_'CT_colonography'_exists__OR__'C-RADS_category_C2__C2a_OR_C3_finding'_associated_with_latest_'CT_colonography'_exists"
  - &'C-RADS_category_C4_finding'_associated_with_latest_'CT_colonography'_exists
    *DIAGNOSTIC_REPORT_result_of_`C-RADS_category_C4`
  - &'C-RADS_category_C2__C2a_OR_C3_finding'_associated_with_latest_'CT_colonography'_exists
    *DIAGNOSTIC_REPORT_result_of_`C-RADS_category_C2a`

eve-pendingColonoscopy:
  - "&'Pending_order_or_referral_for_colonoscopy'_exists__AND__DATE_of_latest_'Pending_order_or_referral_for_colonoscopy'_is_after_DATE_of_latest_'Previous_screening_test_result'"
  - "&'Pending_order_or_referral_for_colonoscopy'_exists"
  - "&DATE_of_latest_'Pending_order_or_referral_for_colonoscopy'_is_after_DATE_of_latest_'Previous_screening_test_result'"